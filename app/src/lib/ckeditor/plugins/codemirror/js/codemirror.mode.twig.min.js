!function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("addon/mode/multiplex",["../../lib/codemirror"],f):f(CodeMirror)}(function(f){f.multiplexingMode=function(h){function k(a,d,c,b){return"string"==typeof d?(c=a.indexOf(d,c),b&&-1<c?c+d.length:c):(d=d.exec(c?a.slice(c):a))?d.index+c+(b?d[0].length:0):-1}var l=Array.prototype.slice.call(arguments,1);return{startState:function(){return{outer:f.startState(h),innerActive:null,
inner:null}},copyState:function(a){return{outer:f.copyState(h,a.outer),innerActive:a.innerActive,inner:a.innerActive&&f.copyState(a.innerActive.mode,a.inner)}},token:function(a,d){if(d.innerActive){var c=d.innerActive,b=a.string;if(!c.close&&a.sol())return d.innerActive=d.inner=null,this.token(a,d);var e=c.close?k(b,c.close,a.pos,c.parseDelimiters):-1;if(e==a.pos&&!c.parseDelimiters)return a.match(c.close),d.innerActive=d.inner=null,c.delimStyle&&c.delimStyle+" "+c.delimStyle+"-close";-1<e&&(a.string=
b.slice(0,e));var g=c.mode.token(a,d.inner);return-1<e&&(a.string=b),e==a.pos&&c.parseDelimiters&&(d.innerActive=d.inner=null),c.innerStyle&&(g=g?g+" "+c.innerStyle:c.innerStyle),g}c=1/0;b=a.string;for(g=0;g<l.length;++g){var m=l[g],e=k(b,m.open,a.pos);if(e==a.pos)return m.parseDelimiters||a.match(m.open),d.innerActive=m,d.inner=f.startState(m.mode,h.indent?h.indent(d.outer,""):0),m.delimStyle&&m.delimStyle+" "+m.delimStyle+"-open";-1!=e&&e<c&&(c=e)}c!=1/0&&(a.string=b.slice(0,c));e=h.token(a,d.outer);
return c!=1/0&&(a.string=b),e},indent:function(a,d){var c=a.innerActive?a.innerActive.mode:h;return c.indent?c.indent(a.innerActive?a.inner:a.outer,d):f.Pass},blankLine:function(a){var d=a.innerActive?a.innerActive.mode:h;if(d.blankLine&&d.blankLine(a.innerActive?a.inner:a.outer),a.innerActive)"\n"===a.innerActive.close&&(a.innerActive=a.inner=null);else for(var c=0;c<l.length;++c){var b=l[c];"\n"===b.open&&(a.innerActive=b,a.inner=f.startState(b.mode,d.indent?d.indent(a.outer,""):0))}},electricChars:h.electricChars,
innerMode:function(a){return a.inner?{state:a.inner,mode:a.innerActive.mode}:{state:a.outer,mode:h}}}}});
(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror"),require("../../addon/mode/multiplex")):"function"==typeof define&&define.amd?define("mode/twig/twig.js",["../../lib/codemirror","../../addon/mode/multiplex"],f):f(CodeMirror)})(function(f){f.defineMode("twig:inner",function(){function f(b,e){var g=b.peek();if(e.incomment)return b.skipTo("#}")?(b.eatWhile(/\#|}/),e.incomment=!1):b.skipToEnd(),"comment";if(e.intag){if(e.operator){if(e.operator=!1,b.match(d))return"atom";
if(b.match(c))return"number"}if(e.sign){if(e.sign=!1,b.match(d))return"atom";if(b.match(c))return"number"}if(e.instring)return g==e.instring&&(e.instring=!1),b.next(),"string";if("'"==g||'"'==g)return e.instring=g,b.next(),"string";if(b.match(e.intag+"}")||b.eat("-")&&b.match(e.intag+"}"))return e.intag=!1,"tag";if(b.match(l))return e.operator=!0,"operator";if(b.match(a))e.sign=!0;else if(b.eat(" ")||b.sol()){if(b.match(k))return"keyword";if(b.match(d))return"atom";if(b.match(c))return"number";b.sol()&&
b.next()}else b.next();return"variable"}if(b.eat("{")){if(b.eat("#"))return e.incomment=!0,b.skipTo("#}")?(b.eatWhile(/\#|}/),e.incomment=!1):b.skipToEnd(),"comment";if(g=b.eat(/\{|%/))return e.intag=g,"{"==g&&(e.intag="}"),b.eat("-"),"tag"}b.next()}var k="and as autoescape endautoescape block do endblock else elseif extends for endfor embed endembed filter endfilter flush from if endif in is include import not or set spaceless endspaceless with endwith trans endtrans blocktrans endblocktrans macro endmacro use verbatim endverbatim".split(" "),
l=/^[+\-*&%=<>!?|~^]/,a=/^[:\[\(\{]/,d="true;false;null;empty;defined;divisibleby;divisible by;even;odd;iterable;sameas;same as".split(";"),c=/^(\d[+\-\*\/])?\d+(\.\d+)?/;return k=new RegExp("(("+k.join(")|(")+"))\\b"),d=new RegExp("(("+d.join(")|(")+"))\\b"),{startState:function(){return{}},token:function(a,c){return f(a,c)}}});f.defineMode("twig",function(h,k){var l=f.getMode(h,"twig:inner");return k&&k.base?f.multiplexingMode(f.getMode(h,k.base),{open:/\{[{#%]/,close:/[}#%]\}/,mode:l,parseDelimiters:!0}):
l});f.defineMIME("text/x-twig","twig")});(function(f){"function"==typeof f.define&&f.define("modeTwig",["mode/twig/twig.js"],function(){})})(this);
