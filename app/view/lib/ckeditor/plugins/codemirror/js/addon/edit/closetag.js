(function(){function h(b,c){var a=b.getCursor(),e=b.getTokenAt(a),g=CodeMirror.innerMode(b.getMode(),e.state),f=g.state;if("xml"!=g.mode.name)return CodeMirror.Pass;var d=b.getOption("autoCloseTags"),i="html"==g.mode.configuration,g="object"==typeof d&&d.dontCloseTags||i&&k,i="object"==typeof d&&d.indentTags||i&&l;if(">"==c&&f.tagName){d=f.tagName;e.end>a.ch&&(d=d.slice(0,d.length-e.end+a.ch));var h=d.toLowerCase();if("tag"==e.type&&"closeTag"==f.type||/\/\s*$/.test(e.string)||g&&-1<j(g,h))return CodeMirror.Pass;
f=(e=i&&-1<j(i,h))?CodeMirror.Pos(a.line+1,0):CodeMirror.Pos(a.line,a.ch+1);b.replaceSelection(">"+(e?"\n\n":"")+"</"+d+">",{head:f,anchor:f});e&&(b.indentLine(a.line+1),b.indentLine(a.line+2))}else if("/"==c&&"<"==e.string)(d=f.context&&f.context.tagName)&&b.replaceSelection("/"+d+">","end");else return CodeMirror.Pass}function j(b,c){if(b.indexOf)return b.indexOf(c);for(var a=0,e=b.length;a<e;++a)if(b[a]==c)return a;return-1}CodeMirror.defineOption("autoCloseTags",!1,function(b,c,a){if(c&&(a==CodeMirror.Init||
!a)){a={name:"autoCloseTags"};if(typeof c!="object"||c.whenClosing)a["'/'"]=function(a){return h(a,"/")};if(typeof c!="object"||c.whenOpening)a["'>'"]=function(a){return h(a,">")};b.addKeyMap(a)}else!c&&(a!=CodeMirror.Init&&a)&&b.removeKeyMap("autoCloseTags")});var k="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),l="applet blockquote body button div dl fieldset form frameset h1 h2 h3 h4 h5 h6 head html iframe layer legend object ol p select table ul".split(" ")})();