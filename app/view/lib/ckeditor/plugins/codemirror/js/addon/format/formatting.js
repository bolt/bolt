(function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,c){return/^[;{}]$/.test(c)}});CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,c,b,a){return this.jsonMode?/^[\[,{]$/.test(c)||/^}/.test(b):";"==c&&a.lexical&&")"==a.lexical.type?!1:/^[;{}]$/.test(c)&&!/^;/.test(b)}});var l=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;
CodeMirror.extendMode("xml",{commentStart:"<\!--",commentEnd:"--\>",newlineAfterToken:function(e,c,b,a){var d=!1;"html"==this.configuration&&(d=a.context?l.test(a.context.tagName):!1);return!d&&("tag"==e&&/>$/.test(c)&&a.context||/^</.test(b))}});CodeMirror.defineExtension("commentRange",function(e,c,b){var a=this,d=CodeMirror.innerMode(a.getMode(),a.getTokenAt(c).state).mode;a.operation(function(){if(e)a.replaceRange(d.commentEnd,b),a.replaceRange(d.commentStart,c),c.line==b.line&&c.ch==b.ch&&a.setCursor(c.line,
c.ch+d.commentStart.length);else{var g=a.getRange(c,b),i=g.indexOf(d.commentStart),f=g.lastIndexOf(d.commentEnd);-1<i&&(-1<f&&f>i)&&(g=g.substr(0,i)+g.substring(i+d.commentStart.length,f)+g.substr(f+d.commentEnd.length));a.replaceRange(g,c,b)}})});CodeMirror.defineExtension("autoIndentRange",function(e,c){var b=this;this.operation(function(){for(var a=e.line;a<=c.line;a++)b.indentLine(a,"smart")})});CodeMirror.defineExtension("autoFormatRange",function(e,c){for(var b=this,a=b.getMode(),d=b.getRange(e,
c).split("\n"),g=CodeMirror.copyState(a,b.getTokenAt(e).state),i=b.getOption("tabSize"),f="",m=0,j=0==e.ch,k=0;k<d.length;++k){for(var h=new CodeMirror.StringStream(d[k],i);!h.eol();){var n=CodeMirror.innerMode(a,g),l=a.token(h,g),o=h.current();h.start=h.pos;if(!j||/\S/.test(o))f+=o,j=!1;if(!j&&n.mode.newlineAfterToken&&n.mode.newlineAfterToken(l,o,h.string.slice(h.pos)||d[k+1]||"",n.state))f+="\n",j=!0,++m}!h.pos&&a.blankLine&&a.blankLine(g);!j&&k<d.length-1&&(f+="\n",j=!0,++m)}b.operation(function(){b.replaceRange(f,
e,c);for(var a=e.line+1,d=e.line+m;a<=d;++a)b.indentLine(a,"smart");b.setSelection(e,b.getCursor(!1))})})})();