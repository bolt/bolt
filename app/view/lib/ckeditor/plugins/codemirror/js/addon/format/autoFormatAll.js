(function(){CodeMirror.defineExtension("autoFormatAll",function(e,m){for(var b=this,f=b.getMode(),h=b.getRange(e,m).split("\n"),i=CodeMirror.copyState(f,b.getTokenAt(e).state),n=b.getOption("tabSize"),d="",j=0,c=0==e.ch,g=0;g<h.length;++g){for(var a=new CodeMirror.StringStream(h[g],n);!a.eol();){var k=CodeMirror.innerMode(f,i),o=f.token(a,i),l=a.current();a.start=a.pos;if(!c||/\S/.test(l))d+=l,c=!1;if(!c&&k.mode.newlineAfterToken&&k.mode.newlineAfterToken(o,l,a.string.slice(a.pos)||h[g+1]||"",k.state))d+=
"\n",c=!0,++j}!a.pos&&f.blankLine&&f.blankLine(i);!c&&g<h.length-1&&(d+="\n",c=!0,++j)}b.operation(function(){b.replaceRange(d,e,m);for(var a=e.line+1,c=e.line+j;a<=c;++a)b.indentLine(a,"smart");b.setCursor({line:0,ch:0})})})})();