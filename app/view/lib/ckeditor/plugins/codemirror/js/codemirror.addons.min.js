(function(){function d(h){for(var c={name:"autoCloseBrackets"},e=0;e<h.length;e+=2)(function(a,f){function b(a){var b=a.getCursor();if(a.getRange(b,CodeMirror.Pos(b.line,b.ch+1))!=f)return CodeMirror.Pass;a.execCommand("goCharRight")}c["'"+a+"'"]=function(g){if(a!=f||b(g)==CodeMirror.Pass){var i=g.getCursor("start"),i=CodeMirror.Pos(i.line,i.ch+1);g.replaceSelection(a+f,{head:i,anchor:i})}};a!=f&&(c["'"+f+"'"]=b)})(h.charAt(e),h.charAt(e+1));return c}CodeMirror.defineOption("autoCloseBrackets",!1,
function(h,c,e){e=e&&e!=CodeMirror.Init;c&&!e?h.addKeyMap(d(typeof c=="string"?c:"()[]{}''\"\"")):!c&&e&&h.removeKeyMap("autoCloseBrackets")})})();
(function(){function d(a,f){var b=a.getCursor(),g=a.getTokenAt(b),i=CodeMirror.innerMode(a.getMode(),g.state),d=i.state,k,j;if("xml"!=i.mode.name)return CodeMirror.Pass;var l=a.getOption("autoCloseTags"),n="html"==i.mode.configuration,i="object"==typeof l&&l.dontCloseTags||n&&c,l="object"==typeof l&&l.indentTags||n&&e;if(">"==f&&d.tagName){if(j=d.tagName,g.end>b.ch&&(j=j.slice(0,j.length-g.end+b.ch)),k=j.toLowerCase(),"tag"==g.type&&"closeTag"==d.type||/\/\s*$/.test(g.string)||i&&-1<h(i,k))return CodeMirror.Pass;
d=(g=l&&-1<h(l,k))?CodeMirror.Pos(b.line+1,0):CodeMirror.Pos(b.line,b.ch+1);a.replaceSelection(">"+(g?"\n\n":"")+"</"+j+">",{head:d,anchor:d});g&&(a.indentLine(b.line+1),a.indentLine(b.line+2))}else if("/"==f&&"<"==g.string)(j=d.context&&d.context.tagName)&&a.replaceSelection("/"+j+">","end");else return CodeMirror.Pass}function h(a,f){if(a.indexOf)return a.indexOf(f);for(var b=0,g=a.length;b<g;++b)if(a[b]==f)return b;return-1}CodeMirror.defineOption("autoCloseTags",!1,function(a,f,b){if(f&&(b==CodeMirror.Init||
!b)){b={name:"autoCloseTags"};(typeof f!="object"||f.whenClosing)&&(b["'/'"]=function(a){return d(a,"/")});(typeof f!="object"||f.whenOpening)&&(b["'>'"]=function(a){return d(a,">")});a.addKeyMap(b)}else!f&&b!=CodeMirror.Init&&b&&a.removeKeyMap("autoCloseTags")});var c="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),e="applet blockquote body button div dl fieldset form frameset h1 h2 h3 h4 h5 h6 head html iframe layer legend object ol p select table ul".split(" ")})();
(function(){function d(f){function g(e,c,h){var d,k,j,l;if(e.text){d=q?0:e.text.length-1;k=q?e.text.length:-1;for(null!=h&&(d=h+r);d!=k;d+=r)if(j=e.text.charAt(d),t.test(j)&&f.getTokenAt(a(c,d+1)).type==u)if(l=b[j],">"==l.charAt(1)==q)s.push(j);else{if(s.pop()!=l.charAt(0))return{pos:d,match:!1};if(!s.length)return{pos:d,match:!0}}}}var e=f.getCursor(),c=f.getLineHandle(e.line),h=e.ch-1,d=0<=h&&b[c.text.charAt(h)]||b[c.text.charAt(++h)],o,p;if(!d)return null;var q=">"==d.charAt(1),r=q?1:-1,u=f.getTokenAt(a(e.line,
h+1)).type,s=[c.text.charAt(h)],t=/[(){}[\]]/,d=e.line;for(p=q?Math.min(d+100,f.lineCount()):Math.max(-1,d-100);d!=p&&!(o=d==e.line?g(c,d,h):g(f.getLineHandle(d),d),o);d+=r);return{from:a(e.line,h),to:o&&a(d,o.pos),match:o&&o.match}}function h(b,g){var c=d(b);if(c&&!(b.getLine(c.from.line).length>f)&&(!c.to||!(b.getLine(c.to.line).length>f))){var h=c.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",l=b.markText(c.from,a(c.from.line,c.from.ch+1),{className:h}),n=c.to&&b.markText(c.to,
a(c.to.line,c.to.ch+1),{className:h});if(e&&b.state.focused&&b.display.input.focus(),c=function(){b.operation(function(){l.clear();n&&n.clear()})},g)setTimeout(c,800);else return c}}function c(b){b.operation(function(){g&&(g(),g=null);b.somethingSelected()||(g=h(b,!1))})}var e=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),a=CodeMirror.Pos,f=1E3,b={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},g=null;CodeMirror.defineOption("matchBrackets",!1,
function(b,a){if(a)b.on("cursorActivity",c);else b.off("cursorActivity",c)});CodeMirror.defineExtension("matchBrackets",function(){h(this,!0)});CodeMirror.defineExtension("findMatchingBracket",function(){return d(this)})})();
CodeMirror.tagRangeFinder=function(d,h){for(var c=RegExp("^[A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*"),e=d.getLine(h.line),a=!1,f=null,b=h.ch,g,i,m,k,
j,l,n;!a;){if(b=e.indexOf("<",b),-1==b)return;if(b+1<e.length&&"/"==e[b+1])b++;else if(e.substr(b+1).match(c)){if(g=e.indexOf(">",b+1),-1==g){var a=h.line+1,o=!1;for(k=d.lineCount();a<k&&!o;){if(i=d.getLine(a),g=i.indexOf(">"),-1!=g&&(o=!0,m=i.lastIndexOf("/",g),-1!=m&&m<g&&(j=e.substr(m,g-m+1),!j.match(/\/\s*\>/))))return;a++}a=!0}else k=e.lastIndexOf("/",g),-1==k?a=!0:(j=e.substr(k,g-k+1),j.match(/\/\s*\>/)||(a=!0));a&&(l=e.substr(b+1),f=l.match(c),f?(f=f[0],-1!=e.indexOf("</"+f+">",b)&&(a=!1)):
a=!1);a||b++}else b++}if(a){c=RegExp("(\\<\\/"+f+"\\>)|(\\<"+f+"\\>)|(\\<"+f+"\\s)|(\\<"+f+"$)");b="</"+f+">";i=1;a=h.line+1;for(k=d.lineCount();a<k;){if(e=d.getLine(a),n=e.match(c),n)for(f=0;f<n.length;f++)if(n[f]==b?i--:i++,!i)return{from:CodeMirror.Pos(h.line,g+1),to:CodeMirror.Pos(a,n.index)};a++}}};
CodeMirror.braceRangeFinder=function(d,h){for(var c=h.line,e=d.getLine(c),a=e.length,f,b,g,i,m,k,j,l,n;!(g=e.lastIndexOf("{",a),g<h.ch);){if(b=d.getTokenAt(CodeMirror.Pos(c,g+1)).type,!/^(comment|string)/.test(b)){f=g;break}a=g-1}if(null!=f&&!(e.lastIndexOf("}")>f)){e=1;a=d.lineCount();g=c+1;a:for(;g<a;++g){k=d.getLine(g);for(j=0;!(l=k.indexOf("{",j),n=k.indexOf("}",j),0>l&&(l=k.length),0>n&&(n=k.length),j=Math.min(l,n),j==k.length);){if(d.getTokenAt(CodeMirror.Pos(g,j+1)).type==b)if(j==l)++e;else if(!--e){i=
g;m=j;break a}++j}}if(null!=i&&i!=c+1)return{from:CodeMirror.Pos(c,f+1),to:CodeMirror.Pos(i,m)}}};CodeMirror.indentRangeFinder=function(d,h){for(var c=d.getOption("tabSize"),e=d.getLine(h.line),a=CodeMirror.countColumn(e,null,c),f,b=h.line+1,g=d.lineCount();b<g;++b)if(f=d.getLine(b),CodeMirror.countColumn(f,null,c)<a&&CodeMirror.countColumn(d.getLine(b-1),null,c)>a)return{from:CodeMirror.Pos(h.line,e.length),to:CodeMirror.Pos(b,f.length)}};
CodeMirror.newFoldFunction=function(d,h){if(null==h&&(h="↔"),"string"==typeof h){var c=document.createTextNode(h),h=document.createElement("span");h.appendChild(c);h.className="CodeMirror-foldmarker"}return function(c,a){var f,b,g,i,m;if("number"==typeof a&&(a=CodeMirror.Pos(a,0)),f=d(c,a),f){b=c.findMarksAt(f.from);for(i=g=0;i<b.length;++i)b[i].__isFold&&(++g,b[i].clear());g||(b=h.cloneNode(!0),CodeMirror.on(b,"mousedown",function(){m.clear()}),m=c.markText(f.from,f.to,{replacedWith:b,clearOnEnter:!0,
__isFold:!0}))}}};
(function(){CodeMirror.defineExtension("autoFormatAll",function(d,h){for(var c=this,e=c.getMode(),a=c.getRange(d,h).split("\n"),f=CodeMirror.copyState(e,c.getTokenAt(d).state),b=c.getOption("tabSize"),g="",i=0,m=0==d.ch,k,j=0;j<a.length;++j){for(k=new CodeMirror.StringStream(a[j],b);!k.eol();){var l=CodeMirror.innerMode(e,f),n=e.token(k,f),o=k.current();k.start=k.pos;(!m||/\S/.test(o))&&(g+=o,m=!1);if(!m&&l.mode.newlineAfterToken&&l.mode.newlineAfterToken(n,o,k.string.slice(k.pos)||a[j+1]||"",l.state))g+=
"\n",m=!0,++i}!k.pos&&e.blankLine&&e.blankLine(f);!m&&j<a.length-1&&(g+="\n",m=!0,++i)}c.operation(function(){c.replaceRange(g,d,h);for(var b=d.line+1,a=d.line+i;b<=a;++b)c.indentLine(b,"smart");c.setCursor({line:0,ch:0})})})})();
(function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(d,c){return/^[;{}]$/.test(c)}});CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(d,c,e,a){return this.jsonMode?/^[\[,{]$/.test(c)||/^}/.test(e):";"==c&&a.lexical&&")"==a.lexical.type?!1:/^[;{}]$/.test(c)&&!/^;/.test(e)}});var d=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;
CodeMirror.extendMode("xml",{commentStart:"<\!--",commentEnd:"--\>",newlineAfterToken:function(h,c,e,a){var f=!1;return"html"==this.configuration&&(f=a.context?d.test(a.context.tagName):!1),!f&&("tag"==h&&/>$/.test(c)&&a.context||/^</.test(e))}});CodeMirror.defineExtension("commentRange",function(d,c,e){var a=this,f=CodeMirror.innerMode(a.getMode(),a.getTokenAt(c).state).mode;a.operation(function(){if(d)a.replaceRange(f.commentEnd,e),a.replaceRange(f.commentStart,c),c.line==e.line&&c.ch==e.ch&&a.setCursor(c.line,
c.ch+f.commentStart.length);else{var b=a.getRange(c,e),g=b.indexOf(f.commentStart),i=b.lastIndexOf(f.commentEnd);-1<g&&-1<i&&i>g&&(b=b.substr(0,g)+b.substring(g+f.commentStart.length,i)+b.substr(i+f.commentEnd.length));a.replaceRange(b,c,e)}})});CodeMirror.defineExtension("autoIndentRange",function(d,c){var e=this;this.operation(function(){for(var a=d.line;a<=c.line;a++)e.indentLine(a,"smart")})});CodeMirror.defineExtension("autoFormatRange",function(d,c){for(var e=this,a=e.getMode(),f=e.getRange(d,
c).split("\n"),b=CodeMirror.copyState(a,e.getTokenAt(d).state),g=e.getOption("tabSize"),i="",m=0,k=0==d.ch,j,l=0;l<f.length;++l){for(j=new CodeMirror.StringStream(f[l],g);!j.eol();){var n=CodeMirror.innerMode(a,b),o=a.token(j,b),p=j.current();j.start=j.pos;(!k||/\S/.test(p))&&(i+=p,k=!1);if(!k&&n.mode.newlineAfterToken&&n.mode.newlineAfterToken(o,p,j.string.slice(j.pos)||f[l+1]||"",n.state))i+="\n",k=!0,++m}!j.pos&&a.blankLine&&a.blankLine(b);!k&&l<f.length-1&&(i+="\n",k=!0,++m)}e.operation(function(){e.replaceRange(i,
d,c);for(var b=d.line+1,a=d.line+m;b<=a;++b)e.indentLine(b,"smart");e.setSelection(d,e.getCursor(!1))})})})();
(function(){function d(f){this.minChars="object"==typeof f&&f.minChars||e;this.style="object"==typeof f&&f.style||a;this.overlay=null}function h(a){a.operation(function(){var b=a._matchHighlightState,d;(b.overlay&&(a.removeOverlay(b.overlay),b.overlay=null),a.somethingSelected())&&((d=a.getSelection().replace(/^\s+|\s+$/g,""),d.length<b.minChars)||a.addOverlay(b.overlay=c(d,b.style)))})}function c(a,b){return{token:function(c){if(c.match(a))return b;c.next();c.skipTo(a.charAt(0))||c.skipToEnd()}}}
var e=2,a="matchhighlight";CodeMirror.defineOption("highlightSelectionMatches",!1,function(a,b,c){var c=c&&c!=CodeMirror.Init,e;if(b&&!c){a._matchHighlightState=new d(b);a.on("cursorActivity",h)}else!b&&c&&(e=a._matchHighlightState.overlay,e&&a.removeOverlay(e),a._matchHighlightState=null,a.off("cursorActivity",h))})})();