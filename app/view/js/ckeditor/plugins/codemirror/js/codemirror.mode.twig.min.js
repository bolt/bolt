!function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("addon/mode/multiplex",["../../lib/codemirror"],f):f(CodeMirror)}(function(f){f.multiplexingMode=function(h){function k(a,e,c,b){return"string"==typeof e?(c=a.indexOf(e,c),b&&-1<c?c+e.length:c):(e=e.exec(c?a.slice(c):a))?e.index+c+(b?e[0].length:0):-1}var l=Array.prototype.slice.call(arguments,1);return{startState:function(){return{outer:f.startState(h),innerActive:null,
inner:null}},copyState:function(a){return{outer:f.copyState(h,a.outer),innerActive:a.innerActive,inner:a.innerActive&&f.copyState(a.innerActive.mode,a.inner)}},token:function(a,e){if(e.innerActive){var c=e.innerActive,b=a.string;if(!c.close&&a.sol())return e.innerActive=e.inner=null,this.token(a,e);var d=c.close?k(b,c.close,a.pos,c.parseDelimiters):-1;if(d==a.pos&&!c.parseDelimiters)return a.match(c.close),e.innerActive=e.inner=null,c.delimStyle&&c.delimStyle+" "+c.delimStyle+"-close";-1<d&&(a.string=
b.slice(0,d));var g=c.mode.token(a,e.inner);return-1<d&&(a.string=b),d==a.pos&&c.parseDelimiters&&(e.innerActive=e.inner=null),c.innerStyle&&(g=g?g+" "+c.innerStyle:c.innerStyle),g}for(var g=1/0,b=a.string,m=0;m<l.length;++m){c=l[m];d=k(b,c.open,a.pos);if(d==a.pos)return c.parseDelimiters||a.match(c.open),e.innerActive=c,b=0,h.indent&&(d=h.indent(e.outer,""),d!==f.Pass&&(b=d)),e.inner=f.startState(c.mode,b),c.delimStyle&&c.delimStyle+" "+c.delimStyle+"-open";-1!=d&&d<g&&(g=d)}g!=1/0&&(a.string=b.slice(0,
g));d=h.token(a,e.outer);return g!=1/0&&(a.string=b),d},indent:function(a,e){var c=a.innerActive?a.innerActive.mode:h;return c.indent?c.indent(a.innerActive?a.inner:a.outer,e):f.Pass},blankLine:function(a){var e=a.innerActive?a.innerActive.mode:h;if(e.blankLine&&e.blankLine(a.innerActive?a.inner:a.outer),a.innerActive)"\n"===a.innerActive.close&&(a.innerActive=a.inner=null);else for(var c=0;c<l.length;++c){var b=l[c];"\n"===b.open&&(a.innerActive=b,a.inner=f.startState(b.mode,e.indent?e.indent(a.outer,
""):0))}},electricChars:h.electricChars,innerMode:function(a){return a.inner?{state:a.inner,mode:a.innerActive.mode}:{state:a.outer,mode:h}}}}});
(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror"),require("../../addon/mode/multiplex")):"function"==typeof define&&define.amd?define("mode/twig/twig.js",["../../lib/codemirror","../../addon/mode/multiplex"],f):f(CodeMirror)})(function(f){f.defineMode("twig:inner",function(){function f(b,d){var g=b.peek();if(d.incomment)return b.skipTo("#}")?(b.eatWhile(/\#|}/),d.incomment=!1):b.skipToEnd(),"comment";if(d.intag){if(d.operator){if(d.operator=!1,b.match(e))return"atom";
if(b.match(c))return"number"}if(d.sign){if(d.sign=!1,b.match(e))return"atom";if(b.match(c))return"number"}if(d.instring)return g==d.instring&&(d.instring=!1),b.next(),"string";if("'"==g||'"'==g)return d.instring=g,b.next(),"string";if(b.match(d.intag+"}")||b.eat("-")&&b.match(d.intag+"}"))return d.intag=!1,"tag";if(b.match(l))return d.operator=!0,"operator";if(b.match(a))d.sign=!0;else if(b.eat(" ")||b.sol()){if(b.match(k))return"keyword";if(b.match(e))return"atom";if(b.match(c))return"number";b.sol()&&
b.next()}else b.next();return"variable"}if(b.eat("{")){if(b.eat("#"))return d.incomment=!0,b.skipTo("#}")?(b.eatWhile(/\#|}/),d.incomment=!1):b.skipToEnd(),"comment";if(g=b.eat(/\{|%/))return d.intag=g,"{"==g&&(d.intag="}"),b.eat("-"),"tag"}b.next()}var k="and as autoescape endautoescape block do endblock else elseif extends for endfor embed endembed filter endfilter flush from if endif in is include import not or set spaceless endspaceless with endwith trans endtrans blocktrans endblocktrans macro endmacro use verbatim endverbatim".split(" "),
l=/^[+\-*&%=<>!?|~^]/,a=/^[:\[\(\{]/,e="true;false;null;empty;defined;divisibleby;divisible by;even;odd;iterable;sameas;same as".split(";"),c=/^(\d[+\-\*\/])?\d+(\.\d+)?/;return k=new RegExp("(("+k.join(")|(")+"))\\b"),e=new RegExp("(("+e.join(")|(")+"))\\b"),{startState:function(){return{}},token:function(a,c){return f(a,c)}}});f.defineMode("twig",function(h,k){var l=f.getMode(h,"twig:inner");return k&&k.base?f.multiplexingMode(f.getMode(h,k.base),{open:/\{[{#%]/,close:/[}#%]\}/,mode:l,parseDelimiters:!0}):
l});f.defineMIME("text/x-twig","twig")});(function(f){"function"==typeof f.define&&f.define("modeTwig",["mode/twig/twig.js"],function(){})})(this);
