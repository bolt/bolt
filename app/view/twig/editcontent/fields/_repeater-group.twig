<div class="repeater-group row panel panel-default">
    <div class="panel-heading text-right">
            <div class="pull-left">
                <a href="#" class="expand"><i class="fa fa-plus-square"></i><i class="fa fa-minus-square hidden"></i></a>
                <a href="#" class="expand">{{ content|first }}</a>
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-sm btn-default move-up" data-toggle="tooltip" data-placement="left" title="{{ __('general.phrase.move-up') }}">
                    <i class="fa fa-arrow-up"></i>
                </button>
                <button type="button" class="btn btn-sm btn-default  move-down" data-toggle="tooltip" data-placement="left" title="{{ __('general.phrase.move-down') }}">
                    <i class="fa fa-arrow-down"></i>
                </button>
                <button type="button" class="btn btn-sm btn-default duplicate-button" data-toggle="tooltip" data-placement="left" title="{{ __('general.phrase.duplicate-set') }}">
                    <i class="fa fa-copy"></i>
                </button>
                <button type="button" class="btn btn-sm btn-silent-danger delete-button" data-toggle="tooltip" data-placement="left" title="{{ __('general.phrase.delete-set') }}">
                    <i class="fa fa-trash"></i>
                </button>
            </div>
        </div>

        <div class="panel-body collapse">
        {% set defaults = {
            class:      '',
            label:      '',
            variant:    '',
            canUpload:  field.canUpload,
            default:    null
        } %}
        {% for rkey, rfield in field.fields %}
            {% set rfield = defaults|merge(rfield) %}
            {% set rcontext = {
                'key':        name ~ '_' ~ index ~ '_' ~ rkey,
                'name':       name ~ '[' ~ index ~ '][' ~ rkey ~ ']',
                'contentkey': rkey,
                'field':      rfield,
                'labelkey':   rfield.label|default(rkey|ucfirst),
                'context': {
                    'content':  content,
                    'can':      {'upload': field.canUpload}
                }
            } %}
            <div class="repeater-field">
                {# Prefix #}
                {% if rcontext.field.prefix is defined and rcontext.field.prefix is not empty %}
                    <div class="prefix">
                        {{ rcontext.field.prefix|markdown }}
                    </div>
                {% endif %}

                {{ include(context.fields[rfield.type].template, rcontext) }}

                {# Postfix #}
                {% if rcontext.field.postfix is defined and rcontext.field.postfix is not empty %}
                    <div class="postfix">
                        {{ rcontext.field.postfix|markdown }}
                    </div>
                {% endif %}

                {# Divider #}
                {% if rcontext.field.separator is defined and rcontext.field.separator == true %}
                    <hr>
                {% endif %}
            </div>
        {% endfor %}
    </div>
</div>
